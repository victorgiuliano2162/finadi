<!-- O formulário principal que engloba tudo. O ngSubmit só é necessário aqui. -->
 <mat-card>

   <form [formGroup]="mainForm" (ngSubmit)="onSubmit()">
     
  <mat-stepper orientation="vertical" #stepper>
    
    <!-- 1º Passo -->
    <!-- [stepControl] usa o getter do componente para verificar a validade do passo -->
    <mat-step [stepControl]="dadosPessoais">
      <!-- ERRO CORRIGIDO: Removido <form> aninhado e usado <div formGroupName> -->
      <div formGroupName="dadosPessoais">
        <ng-template matStepLabel>Preencha seu nome</ng-template>
        <mat-form-field>
          <mat-label>Nome</mat-label>
          <input matInput placeholder="Sobrenome, Nome" formControlName="firstCtrl" required>
        </mat-form-field>
        <div>
          <button mat-button matStepperNext>Próximo</button>
        </div>
      </div>
    </mat-step>

    <!-- 2º Passo -->
    <mat-step [stepControl]="informacoesContato">
      <!-- ERRO CORRIGIDO: Removido <form> aninhado e usado <div formGroupName> -->
      <div formGroupName="informacoesContato">
        <ng-template matStepLabel>Preencha seu endereço</ng-template>
        <mat-form-field>
          <mat-label>Endereço</mat-label>
          <input matInput formControlName="secondCtrl" placeholder="Ex. Av. Paulista, 1000" required>
        </mat-form-field>
        <div>
          <button mat-button matStepperPrevious>Voltar</button>
          <button mat-button matStepperNext>Próximo</button>
        </div>
      </div>
    </mat-step>

    <!-- 3º Passo (Final) -->
    <mat-step>
      <ng-template matStepLabel>Finalizado</ng-template>
      <p>Você completou o cadastro.</p>
      <div>
        <button mat-button matStepperPrevious>Voltar</button>
        <button mat-button (click)="stepper.reset()">Resetar</button>
        <!-- O botão de submissão final deve ser do tipo "submit" -->
        <button mat-raised-button color="primary" type="submit">Enviar Cadastro</button>
      </div>
    </mat-step>

  </mat-stepper>
</form>
</mat-card>